<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SOC1 - Level 1</title>

    <style>
        body { font-family: Arial; background: #f2f2f2; }
        .box { width: 450px; background: white; margin: auto; padding: 25px; 
               border-radius: 10px; margin-top: 80px; box-shadow: 0 0 10px rgba(0,0,0,0.2);}
        input { width: 90%; padding: 10px; margin-top: 10px; }
        button { width: 95%; padding: 12px; background: blue; color: white; font-size: 16px;
                 border: none; margin-top: 15px; cursor:.pointer;}
        #result { margin-top: 15px; font-size: 18px; }
    </style>
</head>
<body>

<div class="box">
    <h2>SOC1 - Level 1</h2>
    <h4 id="questionText">Loading question...</h4>

    <input id="answerInput" type="text" placeholder="Enter your answer"/>
    <button onclick="submitAnswer()">Submit</button>

    <div id="result"></div>
</div>

<script>
const API_ENDPOINT = "https://web-production-f01fc.up.railway.app";
const QUESTION_ID = 2;
const NEXT_PAGE = 3;

async function loadQuestion() {
    const res = await fetch(`${API_ENDPOINT}/question/${QUESTION_ID}`);
    const data = await res.json();
    document.getElementById("questionText").innerText = data.question;
}
loadQuestion();

async function submitAnswer() {
    const answer = document.getElementById("answerInput").value.trim();
    const res = await fetch(`${API_ENDPOINT}/submit`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ question_id: QUESTION_ID, answer: answer })
    });

    const data = await res.json();
    const resultDiv = document.getElementById("result");

    if (data.correct) {
        resultDiv.innerHTML = "üéâ Correct! Moving next...";
        setTimeout(() => {
            window.location.href = `q${NEXT_PAGE}.html`;
        }, 1500);
    } else {
        resultDiv.innerHTML = "‚ùå Wrong! Try again.";
    }
}
</script>

</body>
</html>
